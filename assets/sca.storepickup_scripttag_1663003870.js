if (typeof SCASPSetting === "undefined" || typeof jQuerySCASP === "undefined" || typeof jQuerySCASP.fn.storePickup === "undefined") {
SCASPSetting={"def_apk":"AIzaSyD8BskfTrgyBRao0ptVsgX4Q1kvtcA2tec","sg_enable_app":1,"sg_api_key":"AIzaSyDceTCu-btyCNvS1cadkvwfTPHGqP_Fs7A","sg_zoom":12,"sg_enable_shipping":1,"sg_enable_pickup":true,"sg_enable_delivery":1,"sg_delivery_conditions":"{\"total_min\":\"\",\"total_max\":\"\",\"operator\":\"and\",\"qty_min\":\"\",\"qty_max\":\"\"}","sg_time_format":0,"sg_search_box":1,"sg_restric_country":[],"sg_autogeocode":1,"sg_pagination":1,"sg_location_per_page":1,"sg_distance_length_unit":"m","sg_cart_form_selector":"form[action*=\"cart\"][method=\"post\"]","sg_pickup_position":"button[name=\"checkout\"]:visible, input[name=\"checkout\"]:visible","sg_hide_address_fields":1,"sg_enable_billing_address":1,"sg_datetime_format":"yyyy\/mm\/dd","sp_filter_tags_by":"or","sd_tab_background_color":"#ffffff","sd_active_tab_background_color":"#f4f4f4","sd_enable_case_sensitive_zipcode_filter":0,"sd_shop_name_color":"#000000","sd_shop_info_color":"#000000","sd_shop_name_font_type":"","sd_shop_info_font_type":"ABeeZee","sd_tab_border_color":"#c2c2c2","sd_active_tab_border_color":"#000000","sd_search_box_border_color":"#949494","sd_timepicker_box_border_color":"#949494","sd_enable_restrict_location":0,"sp_pickup_conditions":"{\"total_min\":\"\",\"total_max\":\"\",\"operator\":\"and\",\"qty_min\":\"\",\"qty_max\":\"\"}","sp_disable_shipping":0,"sp_enable_deposit":0,"sp_deposit_amount":10,"sp_all_product_tags":[],"sp_no_tag_location":1,"sp_inventory_type":2,"sp_all_shopify_locations":["63029903553"],"sp_no_shopify_location":0,"sp_stores_sort_by":"default","sg_enable_google_map_api":1,"sp_enable_auto_add_rate_product":0,"sp_pickup_product_id":7832913150191,"sp_pickup_variant_id":43309336199407,"st_shipping_tab":"Shipping","st_shipping_text_content":"Please click the checkout button to continue.","st_store_pickup_tab":"Store Pickup","st_store_pickup_text_content":"Find your nearest pickup location:","st_find_my_location":"Find My Location","st_search_box_placeholder":"Enter your postal code or address...","st_datetime_pickup_placeholder":"Choose a date and time","st_non_select_store_validate_text":"Please choose a store","st_non_select_datetime_validate_text":"Please choose a date and time","st_more_information_text":"More information","st_opening_hours_text":"Opening hours","st_mile_text":"mile","st_miles_text":"miles","st_kilometer_text":"kilometer","st_kilometers_text":"kilometers","st_pickup_text":"Pickup time","st_days_full":{"monday":"Monday","tuesday":"Tuesday","wednesday":"Wednesday","thursday":"Thursday","friday":"Friday","saturday":"Saturday","sunday":"Sunday"},"st_days_short":{"monday":"Mon","tuesday":"Tue","wednesday":"Wed","thursday":"Thu","friday":"Fri","saturday":"Sat","sunday":"Sun"},"st_months_full":{"january":"January","february":"February","march":"March","april":"April","may":"May","june":"June","july":"July","august":"August","september":"September","october":"October","november":"November","december":"December"},"st_months_short":{"january":"Jan","february":"Feb","march":"Mar","april":"Apr","may":"May","june":"Jun","july":"Jul","august":"Aug","september":"Sep","october":"Oct","november":"Nov","december":"Dec"},"st_you_selected_location":"You selected location","st_local_delivery_tab":"Local Delivery","st_local_delivery_text_content":"Enter your address into the field below to check if you are eligible for local delivery","st_delivery_address_validate_success":"Congratulations! You are eligible for delivery.","st_delivery_address_is_required":"Please enter your address to check.","st_delivery_address_is_not_valid":"Sorry. Your location is not available for delivery.","st_delivery_no_validate":"Please choose delivery time.","st_delivery_between_text":"between","st_delivery_and_text":"and","st_delivery_contact_shipping_address_title":"Delivery information","st_delivery_thank_you_marker_shipping":"Delivery address","st_delivery_thank_you_shipping_address_title":"Delivery address","st_delivery_general_edit_shipping_address":"Edit delivery address","st_delivery_general_continue_to_shipping_method":"Continue to delivery method","st_delivery_order_summary_shipping_label":"Delivery","st_delivery_shipping_title":"Delivery method","st_delivery_shipping_waiting_on_rate_notice":"Please wait while we fetch available delivery rates...","st_delivery_shipping_no_rates_for_cart_or_destination_notice":"Delivery is not available for your cart or destination.","st_delivery_shipping_no_rates_for_country_notice":"We don't offer delivery in {{ country }}.","st_search_box_by_postal_code_placeholder":"Enter your postal code ...","st_delivery_postal_code_is_required":"Please enter your postal code to check ...","st_location_not_found":"Your zip code is not eligible for delivery, please choose other methods.","st_shipping_label":"Store Pickup Deposit (Refund Later)","st_shipping_title":"Store Pickup","st_total_due":"PENDING BILLING","st_pickup_not_valid":"Sorry. Your cart items are not available for pickup.","st_delivery_not_valid":"Sorry. Your cart items are not available for delivery.","searchLocation":{"224186":0},"locationsRaw":"[{\"id\":224186,\"store_id\":9190,\"name\":\"America's Gardens\",\"address\":\"4637 Dayton Blvd\",\"address2\":\"\",\"city\":\"Chattanooga\",\"country\":\"USA\",\"state\":\"Tennessee\",\"notification_emails\":\"\",\"notification_template\":\"Hi {{$shop_name}},\\r\\nPlease notice the information:\\r\\nYour customer's name: {{$cust_name}}({{$cust_email}})\\r\\nPickup Date: {{$specified_time}}\\r\\nOrder Id: {{$order_id}} \\r\\nOrder Name: {{$order_name}}\\r\\nOrder Link: {{$order_link}}   \\r\\nPickup Address: {{$address}}\\r\\nPhone: {{$phone}}\\r\\nOrder Summary:\\r\\n{{$order_summary}}\",\"delivery_notification_template\":\"Hi {{$shop_name}},\\r\\nPlease notice the information:\\r\\nYour customer's name: {{$cust_name}}({{$cust_email}})\\r\\nDelivery Time: {{$specified_time}}\\r\\nOrder Id: {{$order_id}}\\r\\nOrder Name: {{$order_name}}\\r\\nOrder Link: {{$order_link}}\\r\\nShipping Address: {{$address}}\\r\\nPhone: {{$phone}}\\r\\nOrder Summary:\\r\\n{{$order_summary}}\",\"opening_hours\":{\"1\":{\"name\":\"Sunday\",\"keyname\":\"sunday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"2\":{\"name\":\"Monday\",\"keyname\":\"monday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"3\":{\"name\":\"Tuesday\",\"keyname\":\"tuesday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"4\":{\"name\":\"Wednesday\",\"keyname\":\"wednesday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"5\":{\"name\":\"Thursday\",\"keyname\":\"thursday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"6\":{\"name\":\"Friday\",\"keyname\":\"friday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"7\":{\"name\":\"Saturday\",\"keyname\":\"saturday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"}},\"enable_date_picker\":1,\"enable_time_picker\":1,\"time_picker_slot\":30,\"status\":1,\"created_at\":\"2022-09-12T16:34:53.000000Z\",\"updated_at\":\"2022-09-12T16:36:52.000000Z\",\"enable_delivery\":1,\"delivery_max_radius\":0,\"delivery_enable_date_picker\":1,\"delivery_enable_time_picker\":1,\"delivery_hours\":{\"1\":{\"name\":\"Sunday\",\"keyname\":\"sunday\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"0\"},\"2\":{\"name\":\"Monday\",\"keyname\":\"monday\",\"wait_day\":\"2\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"3\":{\"name\":\"Tuesday\",\"keyname\":\"tuesday\",\"wait_day\":\"2\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"4\":{\"name\":\"Wednesday\",\"keyname\":\"wednesday\",\"wait_day\":\"2\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"5\":{\"name\":\"Thursday\",\"keyname\":\"thursday\",\"wait_day\":\"2\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"6\":{\"name\":\"Friday\",\"keyname\":\"friday\",\"wait_day\":\"2\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"1\"},\"7\":{\"name\":\"Saturday\",\"keyname\":\"saturday\",\"wait_day\":\"0\",\"wait_hour\":\"0\",\"wait_minute\":\"0\",\"max_day\":\"7\",\"max_hour\":\"0\",\"max_minute\":\"0\",\"status\":\"0\"}},\"blackout_dates\":null,\"phone\":\"423-870-5000\",\"enable_pickup_rates\":0,\"pickup_rates_json\":null,\"enable_max_datetime_picker\":0,\"delivery_enable_max_datetime_picker\":0,\"notification_subject\":\"[Store Pickup Notification] Order {{$order_name}} will be picked up at your store {{$specified_time}}.\",\"delivery_notification_subject\":\"[Local Delivery Notification] Order {{$order_name}} will deliver to your customer {{$specified_time}}.\",\"enable_delivery_rates\":1,\"delivery_rates_json\":\"[{\\\"rate_name\\\":\\\"Less Than 7 Miles\\\",\\\"rate_type\\\":\\\"price\\\",\\\"rate_min\\\":\\\"0.00\\\",\\\"rate_max\\\":\\\"\\\",\\\"rate_price\\\":\\\"60.00\\\"},{\\\"rate_name\\\":\\\"7-10 Miles\\\",\\\"rate_type\\\":\\\"price\\\",\\\"rate_min\\\":\\\"0.00\\\",\\\"rate_max\\\":\\\"\\\",\\\"rate_price\\\":\\\"90.00\\\"},{\\\"rate_name\\\":\\\"11-14 Miles\\\",\\\"rate_type\\\":\\\"price\\\",\\\"rate_min\\\":\\\"0.00\\\",\\\"rate_max\\\":\\\"\\\",\\\"rate_price\\\":\\\"90.00\\\"},{\\\"rate_name\\\":\\\"15-20 Miles\\\",\\\"rate_type\\\":\\\"price\\\",\\\"rate_min\\\":\\\"0.00\\\",\\\"rate_max\\\":\\\"\\\",\\\"rate_price\\\":\\\"190.00\\\"}]\",\"description\":\"America's Gardens\",\"enable_inventory\":1,\"shopify_location_id\":\"63029903553\",\"enable_limit_pickup_slot\":0,\"enable_limit_delivery_slot\":1,\"limit_pickup_slot\":1,\"limit_delivery_slot\":1,\"pickup_slot\":null,\"delivery_slot\":null,\"enable_store_pickup\":1,\"enable_cut_off_time\":0,\"time_cut_off\":\"17:00\",\"day_cut_off_after\":1,\"enable_cut_off_time_delivery\":0,\"time_cut_off_delivery\":\"16:00\",\"day_cut_off_after_delivery\":2,\"available_zipcodes_restrict_delivery\":\"0\",\"lat\":\"35.1344085\",\"lng\":\"-85.28146219999999\",\"postal\":\"37415\",\"tagsvalue\":\"63029903553\"}]","defaultLat":"35.1344085","defaultLng":"-85.28146219999999","version":"CHARGE_ONE_LOCATION","app_url":"https:\/\/storepickup.amai.com","cdn_app_url":"https:\/\/sp.amaicdn.com"};
var SCASPLocationsData=null,processPickupData=null,testMode="undefined"!=typeof SCASPTestModeTheme&&SCASPTestModeTheme,SCASPCart=null,checkingAvailableSlot=!1,storePickupPlugin=null,addedProductPickup=!1,scaspAutoFillCheckoutPagePickup={company:!0,address1:!0,address2:!0,city:!0,country:!0,zipcode:!0,province:!0},scaspAutoFillCheckoutPageDelivery={country:!0,zipcode:!0,province:!0},arrTimeOutTrigger=[],useGeneralScriptCdn="undefined"!=typeof SCASPUseGeneralScriptCdn&&SCASPUseGeneralScriptCdn,scaspAllowDisabledChekoutButton="undefined"==typeof SCASPAllowDisabledCheoutButton||SCASPAllowDisabledCheoutButton,scaspDelayTimeDisabledCheckoutButton="undefined"==typeof SCASPDelayTimeDisabledCheckoutButton?1e3:SCASPDelayTimeDisabledCheckoutButton,scaspAutoAddZipcodeDeliveryCheckout="undefined"==typeof SACSPAutoAddZipcodeDeliveryCheckout||SACSPAutoAddZipcodeDeliveryCheckout,scaspDisableInventoryDelivery="undefined"!=typeof SCASPDisableInventoryDelivery&&SCASPDisableInventoryDelivery,scaspDisableCheckoutButtonWhenInventoryNotValid="undefined"==typeof SCASPDisableCheckoutButtonWhenInventoryNotValid||SCASPDisableCheckoutButtonWhenInventoryNotValid,scaspGetExtendActionUri="undefined"==typeof SCASPGetExtendActionUri?function(e=null){return e}:SCASPGetExtendActionUri,scaspAddRemoveStorePickupProductWhenClickTab="undefined"==typeof SCASPAddRemoveStorePickupProductWhenClickTab||SCASPAddRemoveStorePickupProductWhenClickTab,scaspEnableApp="undefined"==typeof SCASPEnableApp||SCASPEnableApp,scaspRunAppAfter="undefined"==typeof SCASPRunAppAfter?0:SCASPRunAppAfter,scaspWaitUntilSeePickupPosition="undefined"!=typeof SCASPWaitUntilSeePickupPosition&&SCASPWaitUntilSeePickupPosition,scaspWaitUntilSeePickupPositionTime="undefined"==typeof SCASPWaitUntilSeePickupPositionTime?1e4:SCASPWaitUntilSeePickupPositionTime;function scasp_is_installed(){for(var e=!1,t=document.getElementsByTagName("script"),i=0;i<t.length;++i){var a=t[i].getAttribute("src");if(t[i].innerText.indexOf("asyncLoad")>=0&&t[i].innerText.indexOf("sca.storepickup_scripttag")>=0||a&&a.indexOf("shop=")>=0&&a.indexOf("sca.storepickup_scripttag")>=0){testMode&&console.log("already has scripttag, load SP"),e=!0;break}}return e}function sleep(e){const t=Date.now();let i=null;do{i=Date.now()}while(i-t<e)}function scaCheckPreview(){return"true"===new URLSearchParams(window.location.search).get("sp_preview")}function waitUntilSeePickupPosition(e,t=1e4){let i=!1;e=e.replaceAll(":visible","");do{i=document.querySelectorAll(e).length}while(!i&&0!=t);return i}function scaSetCookie(e,t){var i=new Date;i.setTime(i.getTime()+18e5);var a="expires="+i.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}function scaGetCookie(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),a=0;a<i.length;a++){for(var s=i[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return"none"}function gm_authFailure(){if("none"==scaGetCookie("scasp_gm_auth_fail")&&"undefined"!=typeof jQuerySCASP){var e="";e=SCASPSetting.sg_api_key?SCASPSetting.sg_api_key.trim():SCASPSetting.def_apk,""!=Shopify.shop&&""!=e&&jQuerySCASP.ajax({url:SCASPSetting.app_url+"/api/maperror",data:{store:Shopify.shop,api_key:e.trim()},type:"post",success:function(e){testMode&&console.log(e),scaSetCookie("scasp_gm_auth_fail",Shopify.shop)}})}}function disabledCheckoutButton(e,t){if(scaspAllowDisabledChekoutButton){let i=t('input[name="checkout"]'),a=0!==i.length?i:t('button[name="checkout"]');e?(a.prop("disabled",!0),a.css("cursor","not-allowed")):setTimeout((()=>{a.removeAttr("style"),a.prop("disabled",!1)}),scaspDelayTimeDisabledCheckoutButton)}}function checkAvailableTimeSlot(e,t,i){if("pickup"===e){postCheckingSlotData({method:e,day:t.day,month:t.month,year:t.year,hour:t.hour,minute:t.minute,shop_name:Shopify.shop,location_id:parseInt(i('input[name="location_id"]:checked').val())},i)}if("delivery"===e){postCheckingSlotData({method:e,day:t.day,month:t.month,year:t.year,shop_name:Shopify.shop,location_id:parseInt(i(".location_id").first().val())},i)}}function postCheckingSlotData(e,t){let i=t("img#sca-limit-pickup-loader");checkingAvailableSlot||(checkingAvailableSlot=!0,i.removeClass("d-none"),t.ajax({url:SCASPSetting.app_url+"/api/check-available-time-slot",method:"post",dataType:"json",data:e,success:function(e){i.addClass("d-none"),processTimeSlotData(e,t)},error:function(){checkingAvailableSlot=!1,i.addClass("d-none"),disabledCheckoutButton(!1,t)}}))}function usePickupRateProduct(){return SCASPSetting.sp_pickup_product_id&&SCASPSetting.sp_pickup_variant_id&&SCASPSetting.sp_enable_auto_add_rate_product}function addPickupRateProduct(){testMode&&console.log("add");let e=!1,t=null;return jQuerySCASP.ajax({url:"/cart.js",method:"GET",dataType:"JSON",async:!1}).done((i=>{let a=i,s=SCASPSetting.sp_pickup_variant_id;if(void 0!==a.token){let i=a.items;t=i.filter((e=>e.id==s)),e=t.length,e&&(t=t[0])}})).then((()=>{e&&t.quantity>1&&jQuerySCASP.ajax({url:"/cart/update.js",data:{updates:{[SCASPSetting.sp_pickup_variant_id]:1}},method:"POST",async:!1,dataType:"JSON"})})).then((()=>{e||jQuerySCASP.ajax({url:"/cart/add.js",data:{items:[{quantity:1,id:SCASPSetting.sp_pickup_variant_id}]},method:"POST",async:!1,dataType:"JSON"})}))}function removePickupRateProduct(){testMode&&console.log("remove");let e=!1;return jQuerySCASP.ajax({url:"/cart.js",method:"GET",async:!1,dataType:"JSON"}).done((t=>{let i=t,a=SCASPSetting.sp_pickup_variant_id;if(void 0!==i.token){let t=i.items;e=t.filter((e=>e.id==a)).length}})).then((()=>{e&&jQuerySCASP.ajax({url:"/cart/update.js",data:{updates:{[SCASPSetting.sp_pickup_variant_id]:0}},method:"POST",async:!1,dataType:"JSON"})}))}function processTimeSlotData(e,t){let i=t("span.scasp-datetime-required");2===parseInt(e.code)?(disabledCheckoutButton(!1,t),i.text(e.message),i.css("display","block"),i.css("color","green")):(i.text(e.message),i.css("display","block"),i.css("color","red")),checkingAvailableSlot=!1}function isCartPage(){return window.location.href.includes("/cart")}function locationRestrictByPostalCode(){return testMode&&console.log("check location restrict by postal code"),SCASPSetting.hasOwnProperty("sd_enable_restrict_location")&&2==SCASPSetting.sd_enable_restrict_location}function locationRestrictByDistance(){return testMode&&console.log("check location restrict by distance base on setting"),!SCASPSetting.hasOwnProperty("sd_enable_restrict_location")||SCASPSetting.hasOwnProperty("sd_enable_restrict_location")&&1==SCASPSetting.sd_enable_restrict_location}function enableInventoryDelivery(){return testMode&&console.log("check enable inventory delivery"),0!=SCASPSetting.sp_inventory_type&&!scaspDisableInventoryDelivery}function generateAutoFillCheckout(e){return"pickup"==e?"undefined"==typeof SCASPAutoFillCheckoutPagePickup?scaspAutoFillCheckoutPagePickup:{...scaspAutoFillCheckoutPagePickup,...SCASPAutoFillCheckoutPagePickup}:"delivery"==e?"undefined"==typeof SCASPAutoFillCheckoutPageDelivery?scaspAutoFillCheckoutPageDelivery:{...scaspAutoFillCheckoutPageDelivery,...SCASPAutoFillCheckoutPageDelivery}:void 0}window.afDraftOrderCheckout=!0,window.afDiscountObject=null,function(){if(!scaCheckPreview()){if(scaspRunAppAfter>0&&sleep(scaspRunAppAfter),scaspWaitUntilSeePickupPosition&&waitUntilSeePickupPosition(SCASPSetting.sg_pickup_position),"function"==typeof scaStorePickupFirstCall)try{scaStorePickupFirstCall()}catch(e){testMode&&p.log("Callback Error!"),testMode&&p.log(e)}if(scaspEnableApp&&!useGeneralScriptCdn&&SCASPSetting.sg_enable_app){SCASPSetting.sg_pickup_position||(SCASPSetting.sg_pickup_position='button[name="checkout"]:visible, input[name="checkout"]:visible');for(var e,t=SCASPSetting.searchLocation,i=!1,a=!1,s=!1,n="en",o=function(){},r=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],c=r.length,p=window.console=window.console||{};c--;)p[e=r[c]]||(p[e]=o);var l=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];void 0!==SCASPSetting.st_months_full&&null!=SCASPSetting.st_months_full&&(l=[SCASPSetting.st_months_full.january,SCASPSetting.st_months_full.february,SCASPSetting.st_months_full.march,SCASPSetting.st_months_full.april,SCASPSetting.st_months_full.may,SCASPSetting.st_months_full.june,SCASPSetting.st_months_full.july,SCASPSetting.st_months_full.august,SCASPSetting.st_months_full.september,SCASPSetting.st_months_full.october,SCASPSetting.st_months_full.november,SCASPSetting.st_months_full.december]),void 0!==SCASPSetting.st_months_short&&null!=SCASPSetting.st_months_short&&(u=[SCASPSetting.st_months_short.january,SCASPSetting.st_months_short.february,SCASPSetting.st_months_short.march,SCASPSetting.st_months_short.april,SCASPSetting.st_months_short.may,SCASPSetting.st_months_short.june,SCASPSetting.st_months_short.july,SCASPSetting.st_months_short.august,SCASPSetting.st_months_short.september,SCASPSetting.st_months_short.october,SCASPSetting.st_months_short.november,SCASPSetting.st_months_short.december]),void 0!==SCASPSetting.st_days_full&&null!=SCASPSetting.st_days_full&&(d=[SCASPSetting.st_days_full.sunday,SCASPSetting.st_days_full.monday,SCASPSetting.st_days_full.tuesday,SCASPSetting.st_days_full.wednesday,SCASPSetting.st_days_full.thursday,SCASPSetting.st_days_full.friday,SCASPSetting.st_days_full.saturday]),void 0!==SCASPSetting.st_days_short&&null!=SCASPSetting.st_days_short&&(S=[SCASPSetting.st_days_short.sunday,SCASPSetting.st_days_short.monday,SCASPSetting.st_days_short.tuesday,SCASPSetting.st_days_short.wednesday,SCASPSetting.st_days_short.thursday,SCASPSetting.st_days_short.friday,SCASPSetting.st_days_short.saturday]);var g=function(e,t,i={},a=!1){if({},a){if([...document.querySelectorAll("script")].filter((t=>t.src.includes(e))).length>=1)return isCartPage()||t(),!1}var s=document.createElement("script");s.type="text/javascript",s.readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(s.onreadystatechange=null,t())}:s.onload=function(){t()},s.src=e,document.getElementsByTagName("head")[0].appendChild(s)},h=function(e){return parseInt(e)<10?"0"+parseInt(e):e},m=function(e){e=e.join(":");var t=/([01]?\d)(:\d{2}) (AM|PM)/g.exec(e);return null!=t?("PM"==t[3]&&(t[1]=parseInt(t[1])+12),e=[t[1],t[2].replace(":","")]):e=e.split(":"),e};Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i};var P=function(e){return e(".sca-storepickup-delivery-tab").length>0&&e(".sca-storepickup-delivery-tab").hasClass("active")},_=function(e){e(".sca-storepickup-delivery-tab").length>0&&e(".sca-storepickup-delivery-tab").hasClass("active")?y(e,!0):SCASPSetting.hasOwnProperty("sp_inventory_type")?1==SCASPSetting.sp_inventory_type?x(e)&&y(e):2==SCASPSetting.sp_inventory_type?O(e)&&y(e):0==SCASPSetting.sp_inventory_type&&y(e):x(e)&&y(e)},y=function(e,t=!1){testMode&&p.log("startPlugin"),j()?(e(".bh-sl-form-container").show(),P(e)&&locationRestrictByDistance()):e(".bh-sl-form-container").hide(),j()?(e("#bh-sl-map-container, .bh-sl-map-container").storePickup(Q(e,t)),SCASPSetting.storePickup=e("#bh-sl-map-container").data("plugin_storePickup")):(testMode&&p.log("start plugin without api"),e("#bh-sl-map-container, .bh-sl-map-container").storepickup_noapi(Q(e),SCASPSetting,e),e("#sca-storepickup-container").css("opacity","1"))},k=function(e){"undefined"!=typeof SCASPLocale&&(n=SCASPLocale,e=SCASPLocale);var t="/cart?step=contact_information",i=!1;if("undefined"!=typeof SCASPCustomer){for(var a=SCASPCustomer.addresses,s=null,o=0;o<a.length;o++)1==a[o].default&&(s=a[o]);null!=s?(i=!0,t+="&checkout[shipping_address][id]="+s.id,t+="&checkout[shipping_address][first_name]="+s.first_name,t+="&checkout[shipping_address][last_name]="+s.last_name,t+="&checkout[shipping_address][company]="+s.company,t+="&checkout[shipping_address][address1]="+s.address1,t+="&checkout[shipping_address][address2]="+s.address2,t+="&checkout[shipping_address][city]="+s.city,t+="&checkout[shipping_address][country]="+s.country,t+="&checkout[shipping_address][zip]="+s.zip,t+="&checkout[shipping_address][province]="+s.province,t+="&checkout[shipping_address][phone]="+s.phone):i=!1}return"undefined"!=typeof SCASPCustomer&&0!=i||(t+="&checkout[shipping_address][company]=",t+="&checkout[shipping_address][address1]=",t+="&checkout[shipping_address][address2]=",t+="&checkout[shipping_address][city]=",t+="&checkout[shipping_address][country]=",t+="&checkout[shipping_address][zip]=",t+="&checkout[shipping_address][province]="),t+="&sca_pickup_text=",t+="&sca_pickup_date=",t+="&sca_hide_address=",t+="&sca_enable_billing=",t+="&locale="+e,C($,"shipping",0),t},f=function(e=!0){return e?jQuerySCASP(".sca-storepickup-loading").show():jQuerySCASP(".sca-storepickup-loading").hide()},v=function(e){e('input[name="attributes[Checkout-Method]"]').val(""),e('input[name="attributes[Pickup-Location-Id]"]').val(""),e('input[name="attributes[Pickup-Date]"]').val(""),e('input[name="attributes[Pickup-Time]"]').val(""),e('input[name="attributes[Pickup-Location-Company]"]').val(""),e('input[name="attributes[Pickup-Location-Address-Line-1]"]').val(""),e('input[name="attributes[Pickup-Location-Address-Line-2]"]').val(""),e('input[name="attributes[Pickup-Location-City]"]').val(""),e('input[name="attributes[Pickup-Location-Region]"]').val(""),e('input[name="attributes[Pickup-Location-Postal-Code]"]').val(""),e('input[name="attributes[Pickup-Location-Country]"]').val(""),e('input[name="attributes[Delivery-Location-Id]"]').val(""),e('input[name="attributes[Delivery-Date]"]').val(""),e('input[name="attributes[Delivery-Time]"]').val("")},C=function(e,t,i){setTimeout((function(){"undefined"!=typeof BOLD&&void 0!==BOLD.customer&&void 0!==BOLD.recurring_orders&&void 0!==BOLD.recurring_orders.app&&void 0!==BOLD.recurring_orders.app.cartWidget&&(0!=i?"pickup"==t?(BOLD.customer.address1=i.address||"",BOLD.customer.address2=i.address2||"",BOLD.customer.city=i.city||"",BOLD.customer.company=i.name||"",BOLD.customer.country=i.country||"",BOLD.customer.province=i.state||"",BOLD.customer.zip=i.postal||"",BOLD.recurring_orders.app.cartWidget.pickupEnabled=!0):"delivery"==t&&(BOLD.customer.address1="",BOLD.customer.address2="",BOLD.customer.city="",BOLD.customer.company="",BOLD.customer.country=i.country||"",BOLD.customer.province=i.province||"",BOLD.customer.zip=i.zip||"",BOLD.recurring_orders.app.cartWidget.pickupEnabled=!1):(BOLD.customer.address1="",BOLD.customer.address2="",BOLD.customer.city="",BOLD.customer.company="",BOLD.customer.country="",BOLD.customer.province="",BOLD.customer.zip="",BOLD.recurring_orders.app.cartWidget.pickupEnabled=!1),BOLD.recurring_orders.app.cartWidget.loadCustomerData())}),1e3)};SCASPSetting.getParametersApi=function(){if(null==SCASPLocationsData)return"";var e=SCASPLocationsData,t=jQuerySCASP(".location_id:checked").val();jQuerySCASP(".sca-storepickup-delivery-tab").length>0&&jQuerySCASP(".sca-storepickup-delivery-tab").hasClass("active")&&(t=jQuerySCASP(".location_id").first().val());for(var i=null,a=0;a<e.length;a++)if(e[a].id==t){i=e[a];break}if(null!=i){var s="";return s+=b(jQuerySCASP,s,i,n)}return""};var A=function(e,t){var i="";0!==t?i=b(e,i+="/cart?",t,n):i+=k(n),e(SCASPSetting.sg_cart_form_selector).prop("action",i)},b=function(e,t,i,a){if("undefined"!=typeof SCASPLocale&&(n=SCASPLocale,a=SCASPLocale,testMode&&p.log("kien"+a)),testMode&&p.log(a),P(e)){C(e,"delivery",i);let s=generateAutoFillCheckout("delivery");t+="step=contact_information&method=delivery",t+="&checkout[shipping_address][company]=",t+="&checkout[shipping_address][address1]=",t+="&checkout[shipping_address][address2]=",t+="&checkout[shipping_address][city]=",s.country&&(t+="&checkout[shipping_address][country]="+encodeURIComponent(i.country)),s.zipcode&&(t+="&checkout[shipping_address][zip]="+encodeURIComponent(i.postal)),s.province&&(t+="&checkout[shipping_address][province]="+encodeURIComponent(i.state)),a.indexOf("-")>=0?t+="&locale="+a+"SCALD":t+="&locale="+a+"-SCALD"}else{C(e,"pickup",i);let s=generateAutoFillCheckout("pickup");t+="step=contact_information&method=shipping",s.company&&(t+="&checkout[shipping_address][company]="+encodeURIComponent(i.name)),s.address1&&(t+="&checkout[shipping_address][address1]="+encodeURIComponent(i.address)),s.address2&&(t+="&checkout[shipping_address][address2]="+encodeURIComponent(i.address2)),s.city&&(t+="&checkout[shipping_address][city]="+encodeURIComponent(i.city)),s.country&&(t+="&checkout[shipping_address][country]="+encodeURIComponent(i.country)),s.zipcode&&(t+="&checkout[shipping_address][zip]="+encodeURIComponent(i.postal)),s.province&&(t+="&checkout[shipping_address][province]="+encodeURIComponent(i.state)),t+="&sca_pickup_text="+encodeURIComponent(SCASPSetting.st_pickup_text),t+="&sca_pickup_date="+encodeURIComponent(e("#date-pickup").val()),t+="&sca_hide_address="+encodeURIComponent(""+SCASPSetting.sg_hide_address_fields),t+="&sca_enable_billing="+encodeURIComponent(""+SCASPSetting.sg_enable_billing_address),a.indexOf("-")>=0?t+="&locale="+a+"SCASP":t+="&locale="+a+"-SCASP"}return"function"==typeof scaspGetExtendActionUri&&(t=scaspGetExtendActionUri(t)),t};processPickupData=function(e,t){var i=SCASPLocationsData;if(P(e)){void 0===t&&(t=e(".location_id").first().val()),e('input[name="attributes[Checkout-Method]"]').val("delivery"),e('input[name="attributes[Delivery-Date]"]').val(e('input[name="scasp-delivery-date_submit"]').val()),e('input[name="attributes[Delivery-Time]"]').val(e("#scasp-delivery-time_root .picker__list-item--selected").html()),e('input[name="attributes[Delivery-Location-Id]"]').val(t);for(var a=0;a<i.length;a++)if(i[a].id==t){var s=i[a];return A(e,s),!1}}else{void 0===t&&(t=e(".location_id:checked").val());for(var n=0;n<i.length;n++)if(i[n].id==t){var o=i[n];return e('input[name="attributes[Checkout-Method]"]').val("pickup"),e('input[name="attributes[Pickup-Location-Id]"]').val(o.id),e('input[name="attributes[Pickup-Date]"]').val(e('input[name="scasp-date_submit"]').val()),e('input[name="attributes[Pickup-Time]"]').val(e("#scasp-time").val()),e('input[name="attributes[Pickup-Location-Company]"]').val(o.name),e('input[name="attributes[Pickup-Location-Address-Line-1]"]').val(o.address),e('input[name="attributes[Pickup-Location-Address-Line-2]"]').val(o.address2),e('input[name="attributes[Pickup-Location-City]"]').val(o.city),e('input[name="attributes[Pickup-Location-Region]"]').val(o.state),e('input[name="attributes[Pickup-Location-Postal-Code]"]').val(o.postal),e('input[name="attributes[Pickup-Location-Country]"]').val(o.country),A(e,o),!1}}},SCASPSetting.processCheckout=function(e,t){var i=0,a=e(".scasp-datetime-required");if((P(e)||e(".sca-storepickup-shipping-tab.active").length)&&usePickupRateProduct()&&removePickupRateProduct(),P(e)){if(locationRestrictByDistance()){var s=e(".scasp-address-required");""==e("#bh-sl-address").val()&&"none"!=e("#bh-sl-address").css("display")?(s.show(),j()&&i++):s.hide()}""==e("#date-delivery").val()&&"none"!=e("#date-delivery").css("display")?(a.show(),i++):a.hide(),"none"!=e(".scasp-delivery-validate").css("display")&&i++,locationRestrictByDistance()&&"none"==e(".scasp-delivery-success").css("display")&&""!=e("#bh-sl-address").val()&&"none"!=e("#bh-sl-address").css("display")&&(e(".scasp-delivery-validate").show(),i++)}else{var n=e(".scasp-store-required");e(".sca-storepickup-pickup-tab").hasClass("active")&&(e(".location_id").is(":checked")?n.hide():(n.show(),i++)),e(".sca-storepickup-pickup-tab").hasClass("active")&&""==e("#date-pickup").val()&&"none"!=e("#date-pickup").css("display")?(a.show(),i++):a.hide()}if(i>0)return"undefined"!=typeof BOLD&&void 0!==BOLD.recurring_orders&&(BOLD.recurring_orders.app.cartWidget.checkoutEnabled=!1),t.stopImmediatePropagation(),!1;if("undefined"!=typeof BOLD&&void 0!==BOLD.recurring_orders)return BOLD.recurring_orders.app.cartWidget.checkoutEnabled=!0,!0;if(e(".sca-storepickup-pickup-tab").hasClass("active")&&void 0!==SCASPSetting.sp_disable_shipping){if(1==SCASPSetting.sp_disable_shipping){var o=Shopify.shop,r=SCASPSetting.sp_disable_shipping,c=SCASPSetting.sp_enable_deposit,p=SCASPSetting.sp_deposit_amount,l=SCASPSetting.st_total_due,u="",d=null;if(1==SCASPSetting.sp_enable_deposit)var S=SCASPSetting.st_shipping_label;else S=SCASPSetting.st_shipping_title;var g=new Object;return e('input[name*="attributes"]').each((function(){"radio"==e(this).attr("type")?1==e(this).prop("checked")&&(g[e(this).attr("name")]=e(this).val()):""!=e(this).val()&&(g[e(this).attr("name")]=e(this).val())})),null!=window.afDiscountObject&&void 0!==window.afDiscountObject.code&&void 0!==window.afDiscountObject.status&&"200"==window.afDiscountObject.code&&"success"==window.afDiscountObject.status&&(d=window.afDiscountObject.data),e('textarea[name="note"]').length>0&&(u=e('textarea[name="note"]').val()),e.getJSON("/cart.js",(function(t){if(!(void 0!==t.items&&t.items.length>0))return!0;e.ajax({url:SCASPSetting.app_url+"/api/draftorder",method:"POST",dataType:"JSON",data:{store:o,cart:t,note_attributes:g,disable_shipping:r,enable_deposit:c,deposit_amount:p,deposit_label:S,total_due:l,discount_data:d,order_note:u,parameters:SCASPSetting.getParametersApi()},success:function(t){if("0"!==t)var i=t,a=!1,s=setInterval((function(){!1===a&&(a=!0,e.ajax({url:i,type:"GET",error:function(e,t,n){404===e.status||(clearInterval(s),window.location.href=i),a=!1},success:function(e){clearInterval(s),window.location.href=i,a=!1}}))}),100)}})})),!1}return!usePickupRateProduct()||(addPickupRateProduct(),!0)}},SCASPSetting.handlerScriptNoneApi=function(e){if(!(e(SCASPSetting.sg_pickup_position).length>0))return!1;if(0===e("#sca-storepickup-container").length){var t=e("#scasp-container-template").html(),i=Handlebars.compile(t);e(SCASPSetting.sg_pickup_position).before(i(SCASPSetting))}R(e)},SCASPSetting.handlerScriptApi=function(e){if(testMode&&p.log("handlerScriptApi"),!(e(SCASPSetting.sg_pickup_position).length>0))return!1;var t=e("#scasp-container-template").html(),i=Handlebars.compile(t);e(SCASPSetting.sg_pickup_position).before(i(SCASPSetting)),R(e)},SCASPSetting.initStorePickup=function(e){if(testMode&&p.log("initStorePickup"),!(e(SCASPSetting.sg_pickup_position).length>0&&e("#scasp-container-template").length>0))return!1;if(!scasp_is_installed())return!1;if(0===e("#sca-storepickup-container").length){var t=e("#scasp-container-template").html(),i=Handlebars.compile(t);e(SCASPSetting.sg_pickup_position).before(i(SCASPSetting))}testMode&&p.log("loading store pickup plugin..."),function(e,t){if("js"==t)(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",e);else if("css"==t){var i;(i=document.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e)}void 0!==i&&document.getElementsByTagName("head")[0].appendChild(i)}(SCASPSetting.cdn_app_url+"/assets/cdn/css/storepickup.css","css"),"undefined"!=typeof google&&void 0!==google.maps||jQuerySCASP.scaslgoogleLoaded||!j()?(testMode&&p.log("unload google map"),jQuerySCASP.scaslgoogleLoaded=!1,F(jQuerySCASP)):(jQuerySCASP.scaslgoogleLoaded=!0,g("//maps.google.com/maps/api/js?key="+(SCASPSetting.sg_api_key?SCASPSetting.sg_api_key.trim():SCASPSetting.def_apk)+"&libraries=places",(function(){testMode&&p.log("Loaded google map"),F(jQuerySCASP)})))};var w=function(e,t){try{var i=e.split("."),a=t.split("."),s=1e8*parseInt(i[0])+1e6*parseInt(i[1])+1e4*parseInt(i[2]),n=1e8*parseInt(a[0])+1e6*parseInt(a[1])+1e4*parseInt(a[2]);return s>n?1:s<n?-1:0}catch(e){testMode&&p.log(e)}return 1};SCASPSetting.checkVersion=w,"undefined"==typeof jQuery||w("3.0.0",jQuery.fn.jquery)>0?"undefined"==typeof jQuerySCASP?g("//ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js",(function(){testMode&&p.log("finished load jquery..."),jQuerySCASP=jQuery.noConflict(!0),SCASPSetting.initStorePickup(jQuerySCASP)})):SCASPSetting.initStorePickup(jQuerySCASP):(testMode&&p.log("use shop's jquery.."),jQuerySCASP=jQuery,SCASPSetting.initStorePickup(jQuerySCASP))}}function D(e,t,i){if(0==t)return[e,t];for(var a=0;a<=60/i;a++)if(t<=i*a){(60==t||60==(t=i*a))&&(t=0,e++);break}return[e,t]}function j(){return void 0===SCASPSetting.sg_enable_google_map_api||SCASPSetting.sg_enable_google_map_api}function I(e,t){if(t.length>0){e(".bh-sp-filters-container").remove();for(var i='<div class="bh-sp-filters-container" style="display:none"><ul id="scasp-tag-list-container" class="bh-sp-filters">',a=0;a<t.length;a++)i+='<li><input type="checkbox" name="tagsvalue" value="'+t[a]+'" checked="checked"></li>';i+="</ul></div>",e("#sca-storepickup-desc .bh-sl-container").append(i),void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.settings.taxonomyFilters={tagsvalue:"scasp-tag-list-container"},SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):y(e)}else if(SCASPSetting.sp_no_tag_location>0){e(".bh-sp-filters-container").remove();i='<div class="bh-sp-filters-container" style="display:none"><ul id="scasp-tag-list-container" class="bh-sp-filters">';i+='<li><input type="checkbox" name="tagsvalue" value="no_tag_for_store_pickup" checked="checked"></li>',i+="</ul></div>",e("#sca-storepickup-desc .bh-sl-container").append(i),void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.settings.taxonomyFilters={tagsvalue:"scasp-tag-list-container"},SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):y(e)}else e(".sca-storepickup-delivery-not-valid").remove(),e(".sca-storepickup-pickup-not-valid").remove(),P(jQuerySCASP)||e(".sca-storepickup-pickup-desc").after('<p class="sca-storepickup-pickup-not-valid" style="color: #ff0000">'+SCASPSetting.st_pickup_not_valid+"</p>"),P(jQuerySCASP)&&enableInventoryDelivery()&!locationRestrictByPostalCode()&&(e(".sca-storepickup-pickup-desc").after('<p class="sca-storepickup-delivery-not-valid" style="color: #ff0000">'+SCASPSetting.st_delivery_not_valid+"</p>"),e(".scasp-delivery-no-validate").hide(),e("#date-delivery").hide()),e(".bh-sl-container, .sca-storepickup-pickup-desc, .scasp-selected, #date-pickup").hide(),e(".scasp-selected").remove(),P(jQuerySCASP)&&enableInventoryDelivery()&&locationRestrictByPostalCode()&&(e(".bh-sl-container").show(),e(".bh-sl-map-container").hide(),e(".sca-storepickup-delivery-not-valid").hide(),p.log("gvghavghsfasf")),scaspDisableCheckoutButtonWhenInventoryNotValid&&disabledCheckoutButton(!0,jQuerySCASP)}function x(e){if(!(SCASPSetting.sp_all_product_tags.length>0))return!0;e.getJSON("/cart.js",(function(t){if(SCASPCart=t,scaspSearchCallback=function(t){let i=t.tags;if(i=i.filter((e=>e.length>0&&!e.includes("SCA_STOREPICKUP_PRODUCT"))),t.tags=i,t.tags.length>0){var a=[];if(t.hasOwnProperty("products"))for(var s=0;s<SCASPCart.items.length;s++)for(var n in t.products)SCASPCart.items[s].handle==t.products[n].handle&&SCASPSetting.sp_all_product_tags.filter((function(e){-1!=t.products[n].tag.indexOf(e)&&(a.includes(e)||a.push(e))}));else for(var o=0;o<t.tags.length;o++)t.tags[o].length>0&&SCASPSetting.sp_all_product_tags.filter((function(e){-1!=t.tags[o].indexOf(e)&&(a.includes(e)||a.push(e))}));I(e,a)}else void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.settings.taxonomyFilters={tagsvalue:"scasp-tag-list-container"},SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):y(e);e(".sca-storepickup-loading").length>0&&(e(".sca-storepickup-loading").css("display","none"),e("#sca-storepickup-container").css("opacity","1"))},"undefined"!=typeof SCASPProductTagJson){var i=[];p.log(SCASPProductTagJson);for(var a=0;a<t.items.length;a++)e.ajax({url:"/products/"+t.items[a].handle+".json",async:!1,method:"GET",dataType:"json",success:function(e){var t=e.product;if(void 0!==t.tags&&""!=t.tags)for(var a=t.tags.split(", "),s=0;s<a.length;s++)SCASPSetting.sp_all_product_tags.filter((function(e){-1!=a[s].indexOf(e)&&(i.includes(e)||i.push(e))}))}});I(e,i)}else{var s="/search.js?q=";for(a=0;a<t.items.length;a++)s+=a>0?" OR handle:"+t.items[a].handle:"handle:"+t.items[a].handle;s+="&type=product&view=scasp.product.js&_="+(new Date).getTime(),e.getScript(s)}return!1}))}function O(e){if(!(SCASPSetting.sp_all_shopify_locations.length>0))return!0;e.getJSON("/cart.js",(function(t){if(!(t.item_count>0))return!0;for(var i=t,a=Array(),s=0;s<t.items.length;s++)a.push(t.items[s].variant_id);e.ajax({url:SCASPSetting.app_url+"/api/shopifylocation",method:"GET",type:"JSON",data:{shop:Shopify.shop,variant_ids:a},success:function(t){if(1!=t.status)return!0;var a=t.data,s=[];e.each(a,(function(e,t){for(var a=0;a<i.items.length;a++)if((!usePickupRateProduct()||void 0===SCASPSetting.sp_pickup_variant_id||i.items[a].variant_id!=SCASPSetting.sp_pickup_variant_id)&&i.items[a].variant_id==e)for(var n=0;n<t.length;n++)i.items[a].quantity>t[n].quantity&&s.push(t[n].id)}));for(var n=Object.keys(a)[0],o=a[n],r=[],c=0;c<o.length;c++){var p=0;e.each(a,(function(e,t){if(e!=n)for(var i=0;i<t.length;i++)t[i].id==o[c].id&&p++})),p!=Object.keys(a).length-1||s.includes(o[c].id)||SCASPSetting.sp_all_shopify_locations.includes(o[c].id)&&r.push(o[c].id)}if(r.length>0){e(".bh-sp-filters-container").remove();for(var l='<div class="bh-sp-filters-container" style="display:none"><ul id="scasp-tag-list-container" class="bh-sp-filters">',u=0;u<r.length;u++)l+='<li><input type="checkbox" name="tagsvalue" value="'+r[u]+'" checked="checked"></li>';l+="</ul></div>",e("#sca-storepickup-desc .bh-sl-container").append(l),void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.settings.taxonomyFilters={tagsvalue:"scasp-tag-list-container"},SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):y(e)}else if(SCASPSetting.sp_no_shopify_location>0){e(".bh-sp-filters-container").remove();l='<div class="bh-sp-filters-container" style="display:none"><ul id="scasp-tag-list-container" class="bh-sp-filters">';l+='<li><input type="checkbox" name="tagsvalue" value="no_tag_for_store_pickup" checked="checked"></li>',l+="</ul></div>",e("#sca-storepickup-desc .bh-sl-container").append(l),void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.settings.taxonomyFilters={tagsvalue:"scasp-tag-list-container"},SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):y(e)}else e(".sca-storepickup-delivery-not-valid").remove(),e(".sca-storepickup-pickup-not-valid").remove(),P(jQuerySCASP)||e(".sca-storepickup-pickup-desc").after('<p class="sca-storepickup-pickup-not-valid" style="color: #ff0000">'+SCASPSetting.st_pickup_not_valid+"</p>"),P(jQuerySCASP)&&enableInventoryDelivery()&!locationRestrictByPostalCode()&&(e(".sca-storepickup-pickup-desc").after('<p class="sca-storepickup-delivery-not-valid" style="color: #ff0000">'+SCASPSetting.st_delivery_not_valid+"</p>"),e(".scasp-delivery-no-validate").hide(),e("#date-delivery").hide()),e(".bh-sl-container, .sca-storepickup-pickup-desc, .scasp-selected, #date-pickup").hide(),e(".scasp-selected").remove(),P(jQuerySCASP)&&enableInventoryDelivery()&&locationRestrictByPostalCode()&&(e(".bh-sl-container").show(),e(".bh-sl-map-container").hide(),e(".sca-storepickup-delivery-not-valid").hide()),scaspDisableCheckoutButtonWhenInventoryNotValid&&disabledCheckoutButton(!0,jQuerySCASP);e(".sca-storepickup-loading").length>0&&(e(".sca-storepickup-loading").css("display","none"),e("#sca-storepickup-container").css("opacity","1"))}})}))}function L(e){P(e)&&e(".bh-sl-map, .bh-sl-loc-list, .bh-sl-pagination-container, #date-pickup").hide(),e(".sca-storepickup-loading").length>0&&(e(".sca-storepickup-loading").css("display","none"),e("#sca-storepickup-container").css("opacity","1")),0==e(".new-for-mobile").length&&e(".sca-storepickup-pickup-tab").hasClass("active")?j()?e("#bh-sl-map").show():e("#bh-sl-map").hide():e(".new-for-mobile").length>0&&e(".new-for-mobile").width()>470&&e(".sca-storepickup-pickup-tab").hasClass("active")&&j()?e("#bh-sl-map").show():e("#bh-sl-map").hide()}function T(e){if(testMode&&p.log("load data location"),!SCASPSetting.locationsRaw){SCASPSetting.locationsUrl;var t=e.Deferred();return SCASPLocationsData=SCASPSetting.locationsUrl,e.ajax({type:"GET",url:SCASPSetting.locationsUrl,data:{},dataType:"JSON"}).done((function(e){SCASPLocationsData=e,t.resolve(e)})).fail(t.reject),t.promise()}SCASPLocationsData=e.parseJSON(SCASPSetting.locationsRaw)}function M(e=!1){let t=null;return e?t={field:"distance",type:"asc"}:"default"==SCASPSetting.sp_stores_sort_by?t={field:"id",type:"asc"}:"alphabet_a_z"==SCASPSetting.sp_stores_sort_by?t={field:"name",type:"asc"}:"alphabet_z_a"==SCASPSetting.sp_stores_sort_by&&(t={field:"name",type:"desc"}),t}function Q(e,t=!1){return testMode&&p.log("plugin setting"),storePickupPlugin=null,storePickupPlugin={exclusiveFiltering:!SCASPSetting.hasOwnProperty("sp_filter_tags_by")||"or"===SCASPSetting.sp_filter_tags_by,sortBy:M(t),mapSettings:{enable:j(),zoom:SCASPSetting.sg_zoom,zoomControl:!0,mapTypeId:j()?google.maps.MapTypeId.ROADMAP:""},inlineDirections:!0,lengthUnit:SCASPSetting.sg_distance_length_unit,mileLang:SCASPSetting.st_mile_text,milesLang:SCASPSetting.st_miles_text,kilometerLang:SCASPSetting.st_kilometer_text,kilometersLang:SCASPSetting.st_kilometers_text,fullMapStart:!0,slideMap:!1},j()&&"undefined"!=typeof google&&(void 0!==google.maps.places?storePickupPlugin.autoComplete=!0:(storePickupPlugin.autoComplete=!1,e("a#scasp-geocode-btn > img").prop("src",SCASPSetting.cdn_app_url+"/assets/cdn/img/scasp-search-icon.png"),e("a#scasp-geocode-btn").prop("id","bh-sp-submit"))),storePickupPlugin.storeLimit=parseInt(SCASPSetting.max_results)||1500,storePickupPlugin.dataType="json",j()?SCASPSetting.locationsRaw?(storePickupPlugin.dataRaw=SCASPSetting.locationsRaw,SCASPLocationsData=e.parseJSON(SCASPSetting.locationsRaw)):storePickupPlugin.dataLocation=SCASPSetting.locationsUrl:T(e),1==SCASPSetting.sg_autogeocode&&(storePickupPlugin.autoGeocode=!0),SCASPSetting.sg_pagination&&(storePickupPlugin.pagination=!0,storePickupPlugin.locationsPerPage=SCASPSetting.sg_location_per_page),SCASPSetting.defaultLat&&SCASPSetting.defaultLng&&(storePickupPlugin.fullMapStart=!1,storePickupPlugin.defaultLoc=!0,storePickupPlugin.defaultLat=SCASPSetting.defaultLat,storePickupPlugin.defaultLng=SCASPSetting.defaultLng),SCASPSetting.hasOwnProperty("sp_inventory_type"),e(".bh-sp-filters-container").length>0&&(storePickupPlugin.taxonomyFilters={tagsvalue:"scasp-tag-list-container"}),storePickupPlugin.callbackMapSet=function(){L(jQuerySCASP)},"undefined"==typeof google&&e("#sca-storepickup-container").css("opacity","1"),storePickupPlugin.callbackListClick=function(t,i){if("function"==typeof scaStorePickupListClick)try{scaStorePickupListClick(t,i)}catch(e){testMode&&p.log("Callback Error!"),testMode&&p.log(e)}else B()&&e(".new-for-mobile").length>0&&(e(".scasp-selected .scasp-selected-content").html(e('li.scasp-list-container[data-markerid="'+t+'"]').html()),e(".scasp-selected").show())},storePickupPlugin.callbackMarkerClick=function(t,i){if("function"==typeof scaStorePickupMarkerClick)try{scaStorePickupMarkerClick(t,i)}catch(e){testMode&&p.log("Callback Error!"),testMode&&p.log(e)}else B()&&e(".new-for-mobile").length>0&&(e(".scasp-selected .scasp-selected-content").html(e('li.scasp-list-container[data-markerid="'+i+'"]').html()),e(".scasp-selected").show(),e('li.scasp-list-container[data-markerid="'+i+'"]').trigger("click"))},storePickupPlugin.callbackNoResults=function(e,t){P(jQuerySCASP)&&jQuerySCASP(".bh-sl-map, .bh-sl-loc-list, .bh-sl-pagination-container, #date-pickup").hide(),jQuerySCASP(".sca-storepickup-loading").length>0&&(jQuerySCASP(".sca-storepickup-loading").css("display","none"),jQuerySCASP("#sca-storepickup-container").css("opacity","1"))},storePickupPlugin}function B(){var e,t=!1;try{e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),jQuerySCASP(".new-for-mobile").length>0&&jQuerySCASP(".new-for-mobile").width()<=470?(jQuerySCASP(".new-for-mobile").addClass("desktop"),t=!0):jQuerySCASP(".new-for-mobile").removeClass("desktop")}catch(e){testMode&&p.log(e)}return t}function R(e){if(SCASPSetting.sg_enable_app&&(!function(e){var t='<style type="text/css">';t+="#sca-storepickup-methods li {background-color:"+SCASPSetting.sd_tab_background_color+" !important;}",t+="#sca-storepickup-methods li.active {background-color:"+SCASPSetting.sd_active_tab_background_color+" !important;}",t+=".scasp-title {color:"+SCASPSetting.sd_shop_name_color+" !important;}",""!=SCASPSetting.sd_shop_name_font_type&&(t+=".scasp-title {font-family:"+SCASPSetting.sd_shop_name_font_type+" !important;}"),t+=".scasp-address, .scasp-address2, .scasp-city, .scasp-state, .scasp-zipcode, .scasp-country {color:"+SCASPSetting.sd_shop_info_color+" !important;}",""!=SCASPSetting.sd_shop_info_font_type&&(t+=".scasp-address, .scasp-address2, .scasp-city, .scasp-state, .scasp-zipcode, .scasp-country {font-family:"+SCASPSetting.sd_shop_info_font_type+" !important;}"),""!=SCASPSetting.sd_tab_border_color&&(t+="#sca-storepickup-methods li { border-color: "+SCASPSetting.sd_tab_border_color+" !important;}"),""!=SCASPSetting.sd_active_tab_border_color&&(t+="#sca-storepickup-methods li.active { border-color: "+SCASPSetting.sd_active_tab_border_color+" !important;}"),""!=SCASPSetting.sd_search_box_border_color&&(t+="#bh-sl-address { border-color: "+SCASPSetting.sd_search_box_border_color+" !important;}"),""!=SCASPSetting.sd_timepicker_box_border_color&&(t+="#date-pickup { border-color: "+SCASPSetting.sd_timepicker_box_border_color+" !important;}"),t+="</style>",e("html > head").append(t)}(e),e("#sca-storepickup-container").show()),0==e(SCASPSetting.sg_cart_form_selector+' input[name="attributes[Checkout-Method]"]').length&&e('#sca-storepickup-desc input[name*="attributes["]').appendTo(e(SCASPSetting.sg_cart_form_selector)),"undefined"!=typeof SCASPDisableShipping&&(a=SCASPDisableShipping),"undefined"!=typeof SCASPDisableDelivery&&(s=SCASPDisableDelivery),"undefined"!=typeof SCASPDisablePickup&&(i=SCASPDisablePickup),"undefined"!=typeof SCASPLocale&&(n=SCASPLocale,testMode&&p.log(n)),SCASPSetting.sg_enable_shipping&&!a&&(A(e,0),e(".sca-storepickup-shipping-tab").on("click",(function(){j()||f(!0),usePickupRateProduct()&&isCartPage()&&removePickupRateProduct(),disabledCheckoutButton(!1,e),e("#sca-storepickup-desc p, .bh-sl-container, #date-pickup, .scasp-error-msg, .scasp-delivery-validate, .scasp-delivery-success, #date-delivery, .scasp-delivery-no-validate, #scasp-tabs, .scasp-selected").hide(),e("#sca-storepickup-methods li").removeClass("active"),e(".sca-storepickup-shipping-desc").show(),e(".sca-storepickup-shipping-tab").addClass("active"),v(e),A(e,0),j()||f(!1)}))),e(SCASPSetting.sg_cart_form_selector+' input[name="update"], '+SCASPSetting.sg_cart_form_selector+' button[name="update"], '+SCASPSetting.sg_cart_form_selector+" .update_subtotal").click((function(){e(SCASPSetting.sg_cart_form_selector).prop("action","/cart")})),SCASPSetting.sg_enable_pickup&&!i){e(".sca-storepickup-pickup-tab").on("click",(function(){j()||f(!0),usePickupRateProduct()&&isCartPage()&&scaspAddRemoveStorePickupProductWhenClickTab&&addPickupRateProduct(),disabledCheckoutButton(!1,e);let t=e(".sca-storepickup-loading");t.length>0&&j()&&(t.css("display","block"),e("#sca-storepickup-container").css("opacity","0.5")),e("#sca-storepickup-desc p, #date-delivery, .scasp-delivery-success, .scasp-error-msg, .scasp-delivery-no-validate").hide(),e(".sca-storepickup-pickup-not-valid").remove(),e(".sca-storepickup-delivery-not-valid").remove(),e("#sca-storepickup-methods li").removeClass("active"),e(".sca-storepickup-pickup-desc, .bh-sl-container").show(),e(".sca-storepickup-pickup-tab").addClass("active"),e("#date-pickup, #bh-sl-address").val(""),v(e),1==SCASPSetting.sg_search_box?e("#bh-sl-address, #scasp-geocode-btn").show():e("#bh-sl-address, #scasp-geocode-btn").hide(),void 0!==jQuerySCASP.fn.storePickup&&void 0!==SCASPSetting.storePickup?SCASPSetting.hasOwnProperty("sp_inventory_type")?1==SCASPSetting.sp_inventory_type?x(e)&&(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.sortData(M()),SCASPSetting.storePickup.mapReload()):2==SCASPSetting.sp_inventory_type?O(e)&&(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.sortData(M()),SCASPSetting.storePickup.mapReload()):locationRestrictByPostalCode()&&j()&&(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.sortData(M()),SCASPSetting.storePickup.mapReload()):x(e)&&(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.sortData(M()),SCASPSetting.storePickup.mapReload()):_(e),e(".bh-sl-map, .bh-sl-loc-list, .bh-sl-pagination-container").show(),j()||e(".bh-sl-map").hide(),e(".scasp-list-container").first().trigger("click"),e(".new-for-mobile").length>0&&function(e){e(".new-for-mobile   .scasp-tab-list").click((function(){e(this).addClass("active"),e(".new-for-mobile #scasp-tabs li.scasp-tab-map").removeClass("active"),e(".new-for-mobile .bh-sl-loc-list").show(),e(".new-for-mobile #bh-sl-map").hide()})),e(".new-for-mobile .scasp-tab-map").click((function(){e(this).addClass("active"),e(".new-for-mobile #scasp-tabs li.scasp-tab-list").removeClass("active"),e(".new-for-mobile .bh-sl-loc-list").hide(),j()?e(".new-for-mobile #bh-sl-map").show():e(".new-for-mobile #bh-sl-map").hide()})),B()&&(j()?(e(".new-for-mobile #scasp-tabs").show(),e(".new-for-mobile #bh-sl-map").hide()):e(".new-for-mobile #scasp-tabs").hide(),e(document).on("click",".new-for-mobile .bh-sl-loc-list ul.list > li",(function(){e(".new-for-mobile .scasp-view-map-btn").remove();var t=e("#scasp-viewmap-btn-template").html(),i=Handlebars.compile(t);e(this).after(i),j()||e(".scasp-view-map-btn").hide()})),e(document).on("click",".new-for-mobile .scasp-view-map-btn",(function(){return e(".new-for-mobile .scasp-tab-map").trigger("click"),!1})))}(e),j()||e(".bh-sl-form-container").hide(),j()||e("#sca-storepickup-desc").show(),j()||f(!1)})),jQuerySCASP(document).on("click",".location_id",(function(){var e=jQuerySCASP(this);setTimeout((function(){e.closest(".scasp-list-container").trigger("click")}),10)}));var o=null;datepicker=e(document).find("#scasp-date").pickadate({monthsFull:l,monthsShort:u,weekdaysFull:d,weekdaysShort:S,format:"dddd, dd mmm, yyyy",formatSubmit:SCASPSetting.sg_datetime_format,hiddenPrefix:"scasp-date",today:"",clear:"",close:"",min:!0,onOpen:function(){o=null;var i=e(".list-focus").find(".location_id").val();SCASPLocationsData||j()||T(e);var a=SCASPLocationsData[t[i]];this.set("enable",!0);let s=new Date,n=((new Date).getTime(),[]);if((r=a).day_cut_off_after>0&&""!=r.time_cut_off&&r.enable_date_picker){let e=new Date,t=e.getHours(),i=e.getMinutes(),n=a.time_cut_off,o=n.split(":")[0],r=n.split(":")[1];(parseInt(t)>parseInt(o)||parseInt(t)==parseInt(o)&&parseInt(i)>parseInt(r))&&(s=new Date((new Date).getTime()+24*a.day_cut_off_after*36e5),this.set("min",s))}var r,c=a.opening_hours,p=[];for(var l in c){if(c.hasOwnProperty(l))"0"==c[l].status&&(p.push(parseInt(l)),n.push(parseInt(l)))}SCASPSetting.sg_enable_pickup;c=a.opening_hours;var u=new Date,d=c[Object.keys(c)[u.getDay()]],S=d.to.split(":");if(parseInt(h(u.getHours())+""+h(u.getMinutes()))>parseInt(h(S[0])+""+h(S[1]))&&n.push(new Date(u.getFullYear(),u.getMonth(),u.getDate())),d.hasOwnProperty("max_day")&&0!=a.enable_max_datetime_picker){var g=0;if("0"!=d.max_day&&""!=d.max_day&&(g+=24*parseInt(d.max_day)*60*60*1e3),"0"!=d.max_hour&&""!=d.max_hour&&(g+=60*parseInt(d.max_hour)*60*1e3),"0"!=d.max_minute&&""!=d.max_minute&&(g+=60*parseInt(d.max_minute)*1e3),g>0){var m=new Date((new Date).getTime()+g),P=m.getHours()+":"+m.getMinutes(),_=c[Object.keys(c)[m.getDay()]],y=P.split(":"),k=_.to.split(":");parseInt(h(y[0])+h(y[1])),parseInt(h(k[0])+h(k[1]));let e=_.from.split(":");parseInt(100*e[0])+parseInt(e[1])<parseInt(100*m.getHours())+parseInt(m.getMinutes())||m.setDate(m.getDate()-1);var f=new Date(m.getFullYear(),m.getMonth(),m.getDate());this.set("max",f)}}for(var v=1;v<8;v++)if((c[v].hasOwnProperty("wait_day")||c[v].hasOwnProperty("max_day"))&&0!=c[v].status){d=c[v];var C=new Date,A=v-(u.getDay()+1);if(C.setDate(u.getDate()+A),d.hasOwnProperty("wait_day")){var b=0,w=0;"0"!=d.wait_day&&""!=d.wait_day&&(w+=24*parseInt(d.wait_day)*60*60*1e3),d.hasOwnProperty("wait_hour")&&"0"!=d.wait_hour&&""!=d.wait_hour&&(w+=60*parseInt(d.wait_hour)*60*1e3),d.hasOwnProperty("wait_minute")&&"0"!=d.wait_minute&&""!=d.wait_minute&&(w+=60*parseInt(d.wait_minute)*1e3),b=w/24/60/60/1e3;var D=(o=new Date((new Date).getTime()+w)).getHours()+":"+o.getMinutes(),I=c[Object.keys(c)[o.getDay()]],x=D.split(":"),O=I.to.split(":");parseInt(h(x[0])+h(x[1]))>parseInt(h(O[0])+h(O[1]))&&(o=new Date(o.getTime()+864e5));var L=new Date(o.getFullYear(),o.getMonth(),o.getDate());if(0!=b){b=parseInt(b);var M=new Date(C.getTime()),Q=0;Q=b%7==0?b/7:b/7+1;for(var B=0;B<=Q;B++)(M=new Date(C.getTime()+7*B*24*3600*1e3)).getTime()<=L.getTime()&&n.push(new Date(M.getFullYear(),M.getMonth(),M.getDate()))}}}if(a.hasOwnProperty("blackout_dates")){var R=a.blackout_dates;for(var F in R)if(R.hasOwnProperty(F)){var q=R[F].split("-");n.push(new Date(parseInt(q[0]),parseInt(q[1])-1,parseInt(q[2])))}}n.length&&this.set("disable",n)},onSet:function(i){if("select"in i){var a=e(".list-focus").find(".location_id").val();SCASPLocationsData||j()||T(e);var s=SCASPLocationsData[t[a]];if(!s.enable_time_picker)return setTimeout((function(){if(c.off("focus").val(datepicker.get()).focus().on("focus",datepicker.open),B()&&e(".new-for-mobile").length>0){let t=e(".scasp-selected .scasp-selected-content");t.find("div.scasp-selected-time").remove(),t.append('<div class="scasp-selected-time">Pickup at: '+datepicker.get()+"</div>")}processPickupData(e)}),0),!1;var n=s.opening_hours,r=datepicker.get("highlight"),p=n[Object.keys(n)[r.day]],l=p.from.split(":"),u=p.to.split(":"),d=new Date(datepicker.get("highlight").obj),S=0;if(p.hasOwnProperty("wait_day")&&"0"!=p.wait_day&&""!=p.wait_day&&(S+=24*parseInt(p.wait_day)*60*60*1e3),p.hasOwnProperty("wait_hour")&&"0"!=p.wait_hour&&""!=p.wait_hour&&(S+=60*parseInt(p.wait_hour)*60*1e3),p.hasOwnProperty("wait_minute")&&"0"!=p.wait_minute&&""!=p.wait_minute&&(S+=60*parseInt(p.wait_minute)*1e3),0!==S){if((o=new Date((new Date).getTime()+S)).getFullYear()==d.getFullYear()&&o.getMonth()==d.getMonth()&&o.getDate()==d.getDate()){var g=parseInt(h(o.getHours())+""+h(o.getMinutes())),P=p.from.split(":"),_=p.to.split(":");g>parseInt(h(P[0])+h(P[1]))&&g<parseInt(h(_[0])+h(_[1]))&&(l=D(parseInt(o.getHours()),parseInt(o.getMinutes()),parseInt(s.time_picker_slot)))}}else{var y=(f=new Date).getHours(),k=f.getMinutes();f.getFullYear()==d.getFullYear()&&f.getMonth()==d.getMonth()&&f.getDate()==d.getDate()&&parseInt(l[0]+l[1])<parseInt(y+""+k)&&(l=D(parseInt(y),parseInt(k),parseInt(s.time_picker_slot)))}var f=new Date,v=n[Object.keys(n)[f.getDay()]];if(p.hasOwnProperty("max_day")&&0!=s.enable_max_datetime_picker){var C=0;if(v.hasOwnProperty("max_day")&&"0"!=v.max_day&&""!=v.max_day&&(C+=24*parseInt(v.max_day)*60*60*1e3),v.hasOwnProperty("max_hour")&&"0"!=v.max_hour&&""!=v.max_hour&&(C+=60*parseInt(v.max_hour)*60*1e3),v.hasOwnProperty("max_minute")&&"0"!=v.max_minute&&""!=v.max_minute&&(C+=60*parseInt(v.max_minute)*1e3),0!==C){var A=new Date((new Date).getTime()+C);if(A.getFullYear()==d.getFullYear()&&A.getMonth()==d.getMonth()&&A.getDate()==d.getDate()){var b=parseInt(h(A.getHours())+""+h(A.getMinutes())),w=p.from.split(":"),I=p.to.split(":");b>parseInt(h(w[0])+h(w[1]))&&b<parseInt(h(I[0])+h(I[1]))&&(u=D(parseInt(A.getHours()),parseInt(A.getMinutes()),parseInt(s.time_picker_slot)))}}}setTimeout((function(){if(timepicker.set("disable",!1),p.hasOwnProperty("break_from")&&p.hasOwnProperty("break_to")&&"0"!=p.break_from&&"0"!=p.break_to){var e=p.break_from.split(":"),t=p.break_to.split(":");timepicker.set("disable",[{from:[parseInt(e[0]),parseInt(e[1])],to:[parseInt(t[0]),parseInt(t[1])]}])}if(p.hasOwnProperty("break_slot"))for(var i in p.break_slot)if(p.break_slot.hasOwnProperty(i)){var a=p.break_slot[i].break_from.split(":"),n=p.break_slot[i].break_to.split(":");timepicker.set("disable",[{from:[parseInt(a[0]),parseInt(a[1])],to:[parseInt(n[0]),parseInt(n[1])]}])}timepicker.set("interval",s.time_picker_slot),timepicker.set("min",m(l)),timepicker.set("max",m(u)),timepicker.open()}),0)}}}).pickadate("picker");var r="h:i A";0==SCASPSetting.sg_time_format&&(r="HH:i"),timepicker=e(document).find("#scasp-time").pickatime({clear:"",format:r,onSet:function(i){if("select"in i){let i=parseInt(e(".list-focus").find(".location_id").val());if(1==SCASPLocationsData[t[i]].enable_limit_pickup_slot){let t={day:datepicker.get("select","dd"),month:datepicker.get("select","mm"),year:datepicker.get("select","yyyy"),hour:timepicker.get("select","H"),minute:timepicker.get("select","i")};disabledCheckoutButton(!0,e),checkAvailableTimeSlot("pickup",t,e)}setTimeout((function(){if(c.off("focus").val(datepicker.get()+" "+timepicker.get()).focus().on("focus",datepicker.open),B()&&e(".new-for-mobile").length>0){let t=e(".scasp-selected .scasp-selected-content");t.find("div.scasp-selected-time").remove(),t.append('<div class="scasp-selected-time">Pickup at: '+datepicker.get()+" "+timepicker.get()+"</div>")}processPickupData(e)}),0)}}}).pickatime("picker");var c=e("#date-pickup").on("focus",datepicker.open).on("click",(function(e){e.stopPropagation(),datepicker.open()}))}if(SCASPSetting.sg_enable_delivery&&!s){var g=null,y={},C=!1;SCASPDeliveryDatePicker=e(document).find("#scasp-delivery-date").pickadate({monthsFull:l,monthsShort:u,weekdaysFull:d,weekdaysShort:S,format:"dddd, dd mmm, yyyy",formatSubmit:SCASPSetting.sg_datetime_format,hiddenPrefix:"scasp-delivery-date",today:"",clear:"",close:"",min:!0,onOpen:function(){g=null;var i=e(".location_id").first().val();SCASPLocationsData||j()||T(e);var a=SCASPLocationsData[t[i]];this.set("enable",!0);let s=[];if((n=a).day_cut_off_after_delivery>0&&""!=n.time_cut_off_delivery&&n.delivery_enable_date_picker){let e=new Date,t=e.getHours(),i=e.getMinutes(),s=a.time_cut_off_delivery,n=s.split(":")[0],o=s.split(":")[1];(parseInt(t)>parseInt(n)||parseInt(t)==parseInt(n)&&parseInt(i)>parseInt(o))&&(_min_date=new Date((new Date).getTime()+24*a.day_cut_off_after_delivery*36e5),this.set("min",_min_date))}var n,o=a.delivery_hours;let r=[];for(var c in o){if(o.hasOwnProperty(c))"0"==o[c].status&&(r.push(parseInt(c)),s.push(parseInt(c)))}o=a.delivery_hours;var l=new Date,u=o[Object.keys(o)[l.getDay()]];if(u.hasOwnProperty("slot")&&Object.size(u.slot)>0){var d=u.slot[Object.size(u.slot)-1].to.split(":");parseInt(h(l.getHours())+""+h(l.getMinutes()))>parseInt(h(d[0])+""+h(d[1]))&&s.push(new Date(l.getFullYear(),l.getMonth(),l.getDate()))}if(u.hasOwnProperty("max_day")&&0!=a.delivery_enable_max_datetime_picker){var S=0;if("0"!=u.max_day&&""!=u.max_day&&(S+=24*parseInt(u.max_day)*60*60*1e3),u.hasOwnProperty("max_hour")&&"0"!=u.max_hour&&""!=u.max_hour&&(S+=60*parseInt(u.max_hour)*60*1e3),u.hasOwnProperty("max_minute")&&"0"!=u.max_minute&&""!=u.max_minute&&(S+=60*parseInt(u.max_minute)*1e3),S>0){var m=new Date((new Date).getTime()+S),P=m.getHours()+":"+m.getMinutes(),_=o[Object.keys(o)[m.getDay()]],y=P.split(":"),k=0;if(_.hasOwnProperty("slot")&&a.delivery_enable_time_picker)for(var f=0;f<Object.keys(_.slot).length;f++){var v=_.slot[f].to.split(":");parseInt(h(v[0])+h(v[1]))>k&&(k=parseInt(h(v[0])+h(v[1])))}if(parseInt(h(y[0])+h(y[1])),_.hasOwnProperty("slot")){let e=_.slot;"object"==typeof e&&(e=Object.keys(e).map((t=>e[t]))),e=e.filter((e=>{let t=!1,i=e.from,a=i.split(":")[0],s=i.split(":")[1];return t=parseInt(100*a)+parseInt(s)<parseInt(100*y[0])+parseInt(y[1]),t})),e.length>0||m.setDate(m.getDate()-1)}var C=new Date(m.getFullYear(),m.getMonth(),m.getDate());this.set("max",C)}}for(var A=1;A<8;A++)if(o[A].hasOwnProperty("wait_day")&&0!=o[A].status){u=o[A];var b=new Date,w=A-(l.getDay()+1);b.setDate(l.getDate()+w);var D=0,I=0;"0"!=u.wait_day&&""!=u.wait_day&&(I+=24*parseInt(u.wait_day)*60*60*1e3),u.hasOwnProperty("wait_hour")&&"0"!=u.wait_hour&&""!=u.wait_hour&&(I+=60*parseInt(u.wait_hour)*60*1e3),u.hasOwnProperty("wait_minute")&&"0"!=u.wait_minute&&""!=u.wait_minute&&(I+=60*parseInt(u.wait_minute)*1e3),D=I/24/60/60/1e3;var x=(g=new Date((new Date).getTime()+I)).getHours()+":"+g.getMinutes(),O=o[Object.keys(o)[g.getDay()]],L=x.split(":"),M=0;if(O.hasOwnProperty("slot")&&a.delivery_enable_time_picker)for(var Q=0;Q<Object.keys(O.slot).length;Q++){var B=O.slot[Q].to.split(":");parseInt(h(B[0])+h(B[1]))>M&&(M=parseInt(h(B[0])+h(B[1])))}parseInt(h(L[0])+h(L[1]))>M&&M>0&&(g=new Date(g.getTime()+864e5));var R=new Date(g.getFullYear(),g.getMonth(),g.getDate());if("0"!=D&&""!=D){D=parseInt(D);var F=new Date(b.getTime()),q=0;q=D%7==0?D/7:D/7+1;for(var U=0;U<=q;U++)(F=new Date(b.getTime()+7*U*24*3600*1e3)).getTime()<R.getTime()&&s.push(new Date(F.getFullYear(),F.getMonth(),F.getDate()))}}if(a.hasOwnProperty("blackout_dates")){var z=a.blackout_dates;for(var E in z)if(z.hasOwnProperty(E)){var N=z[E].split("-");s.push(new Date(parseInt(N[0]),parseInt(N[1])-1,parseInt(N[2])))}}testMode&&p.log(s),s.length&&this.set("disable",s)},onSet:function(i){if("select"in i){var a=e(".location_id").first().val();SCASPLocationsData||j()||T(e);var s=SCASPLocationsData[t[a]];if(!s.delivery_enable_time_picker)return setTimeout((function(){b.off("focus").val(SCASPDeliveryDatePicker.get()).focus().on("focus",SCASPDeliveryDatePicker.open),processPickupData(e)}),0),!1;C=!0;var n=[],o=[],r=s.delivery_hours,c=SCASPDeliveryDatePicker.get("highlight");y=r[Object.keys(r)[c.day]];var p="24:00",l=new Date(SCASPDeliveryDatePicker.get("highlight").obj);if(!y.hasOwnProperty("slot"))return setTimeout((function(){b.off("focus").val(SCASPDeliveryDatePicker.get()).focus().on("focus",SCASPDeliveryDatePicker.open),processPickupData(e),e('input[name="attributes[Delivery-Time]"]').val("")}),0),!1;var u=new Date,d=r[Object.keys(r)[u.getDay()]];if(d.hasOwnProperty("max_day")){var S=0;if(0!=s.enable_max_datetime_picker){var g=0;if("0"!=d.max_day&&""!=d.max_day&&(g+=24*parseInt(d.max_day)*60*60*1e3),d.hasOwnProperty("max_hour")&&"0"!=d.max_hour&&""!=d.max_hour&&(g+=60*parseInt(d.max_hour)*60*1e3),d.hasOwnProperty("max_minute")&&"0"!=d.max_minute&&""!=d.max_minute&&(g+=60*parseInt(d.max_minute)*1e3),void 0!==g&&0!==g){var m=new Date((new Date).getTime()+g);if(m.getFullYear()==l.getFullYear()&&m.getMonth()==l.getMonth()&&m.getDate()==l.getDate())var P=parseInt(h(m.getHours())+""+h(m.getMinutes()))}}}for(var _=0;_<Object.keys(y.slot).length;_++){var k=p.split(":"),f=y.slot[_].from.split(":");parseInt(h(f[0])+""+h(f[1]))<parseInt(h(k[0])+""+h(k[1]))&&(void 0!==g&&0!==g&&void 0!==P&&parseInt(h(f[0])+""+h(f[1]))<parseInt(h(m.getHours())+""+h(m.getMinutes()))&&(S=y.slot[_].from),p=y.slot[_].from),n.push([y.slot[_].from.split(":"),y.slot[_].to.split(":")]),o.push(y.slot[_].from.split(":"))}var v=p.split(":"),A=0;if(y.hasOwnProperty("wait_day")&&"0"!=y.wait_day&&""!=y.wait_day&&(A+=24*parseInt(y.wait_day)*60*60*1e3),y.hasOwnProperty("wait_hour")&&"0"!=y.wait_hour&&""!=y.wait_hour&&(A+=60*parseInt(y.wait_hour)*60*1e3),y.hasOwnProperty("wait_minute")&&"0"!=y.wait_minute&&""!=y.wait_minute&&(A+=60*parseInt(y.wait_minute)*1e3),0!==A){var w=new Date((new Date).getTime()+A);if(w.getFullYear()==l.getFullYear()&&w.getMonth()==l.getMonth()&&w.getDate()==l.getDate()){var I=parseInt(h(w.getHours())+""+h(w.getMinutes()));if(I>parseInt(h(v[0])+""+h(v[1]))){for(var x=0,O=[],L=0;L<n.length;L++){if(parseInt(n[L][0][0]+""+n[L][0][1])<I&&I<parseInt(n[L][1][0]+""+n[L][1][1])){v=D(parseInt(n[L][0][0]),parseInt(n[L][0][1]),15),x++;break}I<parseInt(n[L][0][0]+""+n[L][0][1])&&0==O.length&&(O=D(parseInt(n[L][0][0]),parseInt(n[L][0][1]),15))}0==x&&(v=O)}}}else{var M=(u=new Date).getHours(),Q=u.getMinutes();if(u.getFullYear()==l.getFullYear()&&u.getMonth()==l.getMonth()&&u.getDate()==l.getDate()){v=D(parseInt(M),parseInt(Q),15);for(var B=parseInt(h(v[0])+""+h(v[1])),R=(x=0,O=[],0);R<Object.keys(y.slot).length;R++){var F=y.slot[R].from.split(":"),q=y.slot[R].to.split(":");if(parseInt(h(F[0])+""+h(F[1]))<B&&B<parseInt(h(q[0])+""+h(q[1]))){v=D(parseInt(F[0]),parseInt(F[1]),15),x++;break}B<parseInt(h(F[0])+""+h(F[1]))&&0==O.length&&(O=D(parseInt(F[0]),parseInt(F[1]),15))}0==x&&(v=O)}}setTimeout((function(){!j()&&SCASPDeliveryTimePicker,SCASPDeliveryTimePicker.set("disable",!0),SCASPDeliveryTimePicker.set("disable",o),SCASPDeliveryTimePicker.set("min",v),0!==S?SCASPDeliveryTimePicker.set("max",S.split(":")):SCASPDeliveryTimePicker.set("max",!1),SCASPDeliveryTimePicker.open()}),0)}},onClose:function(){let i=parseInt(e(".location_id").first().val());SCASPLocationsData[t[i]].enable_limit_delivery_slot&&(disabledCheckoutButton(!0,e),checkAvailableTimeSlot("delivery",{day:SCASPDeliveryDatePicker.get("select","dd"),month:SCASPDeliveryDatePicker.get("select","mm"),year:SCASPDeliveryDatePicker.get("select","yyyy"),time:null},e))}}).pickadate("picker");r="h:i A";0==SCASPSetting.sg_time_format&&(r="HH:i"),SCASPDeliveryTimePicker=e(document).find("#scasp-delivery-time").pickatime({clear:"",interval:15,format:r,formatLabel:function(e){if(C&&y.hasOwnProperty("slot"))for(var t=0;t<Object.keys(y.slot).length;t++){var i=y.slot[t].from.split(":");if(e.hour==parseInt(i[0])&&e.mins==parseInt(i[1])){var a=y.slot[t].to.split(":");return 1==SCASPSetting.sg_time_format?"h:i A - "+(s=parseInt(a[0]),n=parseInt(a[1]),o=void 0,o=s>=12?"PM":"A",(s=(s%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+o):"HH:i - "+a[0]+":"+a[1]}}var s,n,o;return""},onSet:function(t){"select"in t&&setTimeout((function(){C=!1;var t=e("#scasp-delivery-time_root .picker__list-item--selected").html();b.off("focus").val(SCASPDeliveryDatePicker.get()+" "+SCASPSetting.st_delivery_between_text+" "+t.replace("-",SCASPSetting.st_delivery_and_text)).focus().on("focus",SCASPDeliveryDatePicker.open),processPickupData(e)}),0)}}).pickatime("picker");var b=e("#date-delivery").on("focus",SCASPDeliveryDatePicker.open).on("click",(function(e){e.stopPropagation(),SCASPDeliveryDatePicker.open()}));e(".sca-storepickup-delivery-tab").on("click",(function(){j()||f(!0),usePickupRateProduct()&&isCartPage()&&scaspAddRemoveStorePickupProductWhenClickTab&&removePickupRateProduct(),j()||L(e),disabledCheckoutButton(!1,e);let t=e(".sca-storepickup-loading");t.length>0&&j()&&(t.css("display","block"),e("#sca-storepickup-container").css("opacity","0.5")),e(".bh-sp-filters-container").remove(),e("#sca-storepickup-desc p, .scasp-error-msg, .scasp-selected, #scasp-tabs, .scasp-delivery-validate").hide(),e("#sca-storepickup-methods li").removeClass("active"),e(".bh-sl-container").show(),e(".sca-storepickup-delivery-tab").addClass("active"),e("#date-delivery").hide(),e("#date-delivery").val(""),locationRestrictByDistance()&&(e("#bh-sl-address").val(""),e("p.sca-storepickup-delivery-desc").show()),j()||e("p.sca-storepickup-delivery-desc").hide(),e(".sca-storepickup-pickup-not-valid").remove(),e(".sca-storepickup-delivery-not-valid").remove(),v(e),enableInventoryDelivery()&&SCASPSetting.hasOwnProperty("sp_inventory_type")&&(1==SCASPSetting.sp_inventory_type?x(e):2==SCASPSetting.sp_inventory_type?O(e):SCASPSetting.sp_inventory_type),void 0!==jQuerySCASP.fn.storePickup&&void 0!==SCASPSetting.storePickup&&j()?(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.sortData(M(!0)),SCASPSetting.storePickup.mapReload()):_(e),e(SCASPSetting.sg_cart_form_selector).prop("action",k(n)),j()||(e(".bh-sl-loc-list").hide(),e(".scasp-list-container").first().trigger("click")),j()||f(!1)}))}(SCASPSetting.sg_enable_pickup&&!i||SCASPSetting.sg_enable_delivery&&!s)&&e(document).on("click",".scasp-list-container",(function(){j()||(e("#date-pickup").val(""),e('input[name="scasp-date_submit"]').val(""),e("li.scasp-list-container").removeClass("list-focus"),e(this).addClass("list-focus"),e(this).find(".location_id").prop("checked",!0)),e("#sca-storepickup-container .picker").removeClass("picker--focused picker--opened"),e(".scasp-store-required").hide();var i=e(this).find(".location_id").val();SCASPLocationsData||j()||T(e);var a=SCASPLocationsData[t[i]];if(j()){if(!a.enable_date_picker)return e("#date-pickup").hide(),e(".scasp-datetime-required").hide(),processPickupData(e,i),!1;P(e)||e("#date-pickup").show()}else if(!storepickup_noapi_params.deliveryTabOpened(jQuerySCASP)){if(!a.enable_date_picker)return e("#date-pickup").hide(),e(".scasp-datetime-required").hide(),processPickupData(e,i),!1;P(e)||e("#date-pickup").show()}if(j()||storepickup_noapi_params.deliveryTabOpened(jQuerySCASP)&&(e("#date-pickup").hide(),a.delivery_enable_date_picker?(e("#date-pickup").hide(),e(".sca-storepickup-delivery-not-valid").length>0?(e(".scasp-delivery-no-validate").hide(),e("#date-delivery").hide()):(e(".scasp-delivery-no-validate").show(),e("#date-delivery").show()),processPickupData(e,i)):(e(".scasp-delivery-no-validate").hide(),e("#date-delivery").hide())),j()||processPickupData(e,i),SCASPSetting.sg_enable_delivery&&!s&&!j()&&SCASPDeliveryDatePicker,j()||e("button.scasp-view-map-btn").hide(),!j()&&storepickup_noapi_params.deliveryTabOpened(jQuerySCASP)){var n=a.delivery_hours;let t=0,i=[];for(var o in n){if(n.hasOwnProperty(o))"0"==n[o].status&&(i.push(parseInt(o)),t++)}SCASPDeliveryDatePicker,t<7||7==t&&(e(".scasp-delivery-success").hide(),e(".scasp-delivery-validate").show(),e("#date-delivery").hide())}}));var w=[];if(!SCASPSetting.sg_enable_shipping||a?(e(".sca-storepickup-shipping-tab").hide(),e(".sca-storepickup-shipping-desc").hide()):w.push("shipping"),!SCASPSetting.sg_enable_pickup||i||"delivery"==SCASPSetting.version?e(".sca-storepickup-pickup-tab").hide():w.push("pickup"),!SCASPSetting.sg_enable_delivery||s||"pickup"==SCASPSetting.version?e(".sca-storepickup-delivery-tab").hide():w.push("delivery"),1==w.length)switch(e("ul#sca-storepickup-methods").hide(),w[0]){case"shipping":e(".sca-storepickup-shipping-desc").hide(),e(".sca-storepickup-shipping-tab").trigger("click");break;case"pickup":e("#sca-storepickup-container").prepend("<h3>"+SCASPSetting.st_store_pickup_tab+"</h3>"),j()||e("#bh-sl-map").hide(),e(".sca-storepickup-pickup-tab").trigger("click");break;case"delivery":e("#sca-storepickup-container").prepend("<h3>"+SCASPSetting.st_local_delivery_tab+"</h3>"),e(".sca-storepickup-delivery-tab").trigger("click");break;default:e(".sca-storepickup-shipping-desc").hide()}else(2==w.length||3==w.length)&&(-1==e.inArray("shipping",w)?"undefined"!=typeof SCASPActiveStorePickupTab&&1==SCASPActiveStorePickupTab?e(".sca-storepickup-pickup-tab").trigger("click"):e(".sca-storepickup-delivery-tab").trigger("click"):e(".sca-storepickup-shipping-tab").trigger("click"));if(e(document).on("click",'button[name="checkout"], input[name="checkout"]',(function(t){if(0==SCASPSetting.processCheckout(e,t))return t.stopImmediatePropagation(),!1})),"function"==typeof scaStorePickupCallback)try{scaStorePickupCallback()}catch(e){testMode&&p.log("Callback Error!"),testMode&&p.log(e)}}function F(e){testMode&&p.log("loadPickupLib"),locationRestrictByPostalCode()&&(testMode&&p.log("load render fiter zipcode"),void 0===jQuerySCASP.fn.scasp_render_zipcode_filter&&g(SCASPSetting.cdn_app_url+"/assets/cdn/js/jquery.scasp_zipcode_filter.js",(function(){e(document).ready((function(){testMode&&p.log("load zipcode filter render cdn"),e("#bh-sl-map-container, .bh-sl-map-container").scasp_render_zipcode_filter(jQuerySCASP,SCASPSetting)}))}))),void 0!==jQuerySCASP.fn.storePickup||jQuerySCASP.scaslpluginLoaded,j()&&void 0!==google.maps?g(SCASPSetting.cdn_app_url+"/assets/cdn/js/jquery.storepickup.js",(function(){testMode&&p.log("Loaded Pickup plugin."),e(document).ready((function(){R(jQuerySCASP)}))})):g(SCASPSetting.cdn_app_url+"/assets/cdn/js/jquery.storepickup.js",(function(){testMode&&p.log("Loaded Pickup lib without api"),e(document).ready((function(){g(SCASPSetting.cdn_app_url+"/assets/cdn/js/jquery.storepickup.noapi.js",(function(){e(document).ready((function(){testMode&&p.log("load plugin without api key"),R(jQuerySCASP)}))}),{},!0)}))}),{},!0)}}(),scaCheckPreview()||SCASPSetting.scasp_ajax_disable||(SCASPSetting.appendPickupTo=function(e){$(e+" .scasp_pickup_position").length<1&&$(e).append('<span class="scasp_pickup_position"></span>'),SCASPSetting.sg_pickup_position=".scasp_pickup_position"},SCASPSetting.getAjaxFormId=function(){var e='form[action*="cart"][action!="/cart/add"][method="post"]';if(-1!=Shopify.theme.name.toLowerCase().indexOf("turbo")&&(SCASPSetting.sg_pickup_position=".cart_container .cart_content .action_button",e='form[action*="checkout"][method="post"]'),-1!=Shopify.theme.name.toLowerCase().indexOf("boundless")&&SCASPSetting.appendPickupTo(".ajaxcart__inner"),-1!=Shopify.theme.name.toLowerCase().indexOf("narrative")&&$(".cart-drawer__footer").css("overflow","auto"),-1!=Shopify.theme.name.toLowerCase().indexOf("brooklyn")&&SCASPSetting.appendPickupTo(".ajaxcart__inner"),-1!=Shopify.theme.name.toLowerCase().indexOf("parallax")&&(e="#cart",$("#cart").attr("action","/cart"),SCASPSetting.sg_pickup_position='#cart input[type="submit"]'),-1!=Shopify.theme.name.toLowerCase().indexOf("turbo")&&(e=".header .top_bar .cart_container .js-cart_content__form",$(e).attr("action","/cart"),SCASPSetting.sg_pickup_position=e+' input[type="submit"]'),"undefined"!=typeof scasp_ajax_callback){var t=scasp_ajax_callback();t&&(e=t)}return e},SCASPSetting.ajaxcounter=0,SCASPSetting.startAjaxPickup=function(e){setTimeout((function(){if(-1==window.location.href.indexOf("/cart")){var t=SCASPSetting.getAjaxFormId();e(t).length?(SCASPSetting.ajaxcounter=0,e(".scasp-loading-option").length&&e(".scasp-loading-option").remove(),e(t).append('<div class="scasp-loading-option" style="color:#1b0eba;text-align:center;margin-bottom:16px;"><span class="scasp-ajax-loading"></span></div>'),e.ajax({type:"get",url:"/cart",success:function(t){var i=SCASPSetting.getAjaxFormId();if(0!=e('script[src*="storepickup_scripttag"]').length){e('script[src*="storepickup_scripttag"]').eq(0).attr("src");var a=e("<div/>").html(t);if(e(i).length>0&&e(".scasp-wrapper",a).length>0){e(i+" .scasp-wrapper").remove(),e(i+" #sca-storepickup-container").remove(),e(i).append(e(".scasp-wrapper",a));try{testMode&&console.log(SCASPSetting),useMapApiKey()?"undefined"!=typeof jQuerySCASP&&void 0!==jQuerySCASP.fn.storePickup?(testMode&&console.log("handlerScriptApi"),void 0!==SCASPSetting.storePickup&&SCASPSetting.storePickup.reset(),SCASPSetting.handlerScriptApi(jQuerySCASP)):(testMode&&console.log("initStorePickup"),SCASPSetting.initStorePickup(jQuerySCASP)):"undefined"!=typeof jQuerySCASP&&void 0!==jQuerySCASP.fn.storePickup?(testMode&&console.log("handlerScriptApi"),void 0!==SCASPSetting.storePickup&&SCASPSetting.storePickup.reset(),SCASPSetting.handlerScriptNoneApi(jQuerySCASP)):(SCASPSetting.handlerScriptNoneApi(jQuerySCASP),testMode&&console.log("initStorePickup"))}catch(e){"undefined"!=typeof jQuerySCASP&&void 0!==jQuerySCASP.fn.storePickup?(testMode&&console.log("handlerScriptApi"),void 0!==SCASPSetting.storePickup&&SCASPSetting.storePickup.reset(),SCASPSetting.handlerScriptNoneApi(jQuerySCASP)):(testMode&&console.log("initStorePickup 1323"),SCASPSetting.initStorePickup(jQuerySCASP))}}e(".scasp-loading-option").length&&e(".scasp-loading-option").remove()}},error:function(){e(".scasp-loading-option").length&&e(".sca-loading-option").remove()}})):SCASPSetting.ajaxcounter<5&&(testMode&&console.log("try: "+SCASPSetting.ajaxcounter),SCASPSetting.ajaxcounter++,SCASPSetting.startAjaxPickup(e))}}),1e3)},SCASPSetting.doAjaxPickup=function(e,t,i){-1!=i.url.indexOf("/cart.js")&&(SCASPSetting.ajaxcounter=0,SCASPSetting.startAjaxPickup(jQuerySCASP))},SCASPSetting.jqueryIntervalCounter=10,"undefined"!==SCASPSetting.jqueryInterval&&clearInterval(SCASPSetting.jqueryInterval),SCASPSetting.jqueryInterval=setInterval((function(){if(SCASPSetting.jqueryIntervalCounter=SCASPSetting.jqueryIntervalCounter-1,SCASPSetting.jqueryIntervalCounter>0&&"undefined"!=typeof jQuerySCASP){try{if(!scasp_is_installed())return clearInterval(SCASPSetting.jqueryInterval),!1;jQuerySCASP(document).ajaxComplete(SCASPSetting.doAjaxPickup),"undefined"!=typeof $&&SCASPSetting.checkVersion("3.0.0",jQuery.fn.jquery)>0?$(document).ajaxComplete(SCASPSetting.doAjaxPickup):"undefined"!=typeof jQuery&&SCASPSetting.checkVersion("3.0.0",jQuery.fn.jquery)>0&&jQuery(document).ajaxComplete(SCASPSetting.doAjaxPickup),-1!=Shopify.theme.name.toLowerCase().indexOf("narrative")&&SCASPSetting.doAjaxPickup(null,null,{url:"/cart.js"}),-1!=Shopify.theme.name.toLowerCase().indexOf("parallax")&&SCASPSetting.doAjaxPickup(null,null,{url:"/cart.js"}),-1!=Shopify.theme.name.toLowerCase().indexOf("turbo")&&SCASPSetting.doAjaxPickup(null,null,{url:"/cart.js"}),jQuerySCASP.getScript("//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js")}catch(e){testMode&&console.log(e)}clearInterval(SCASPSetting.jqueryInterval)}else SCASPSetting.jqueryIntervalCounter<1&&clearInterval(SCASPSetting.jqueryInterval)}),500));var scasp_not_found_location_handle={renderNotFoundLocation:function(e=!0,t=""){if(jQuerySCASP("#sca-storepickup-container .scasp-not-found-location").remove(),testMode&&console.log("renderNotFoundLocation"),e){let e=jQuerySCASP("<div>",{class:"scasp-not-found-location"});return jQuerySCASP(e).append(jQuerySCASP("<div>",{class:"scasp-error-msg",text:""==t?SCASPSetting.st_location_not_found:t})),jQuerySCASP("#sca-storepickup-container").append(e)}}};
 } 